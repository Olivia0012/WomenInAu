{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\workplace\\\\front-end\\\\pages\\\\components\\\\Chat.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport { Connect, On, Emit, Get } from './http';\nimport ShowChatList from './ChatList';\nimport ChatPannel from './ChatPannel';\nimport '../util/config';\nimport { MdaccountCircle } from \"react-icons/md\";\n\nvar Chat =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Chat, _Component);\n\n  function Chat(props) {\n    var _this;\n\n    _classCallCheck(this, Chat);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Chat).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleShowList\", function () {\n      _this.setState({\n        showListX: '10%',\n        showIcon: 0,\n        chatStatus: 1\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCloseList\", function () {\n      _this.setState({\n        showListX: '-100%',\n        showIcon: 1,\n        chatStatus: 0\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCloseChat\", function () {\n      _this.setState({\n        showListX: '10%',\n        showChat: '-10%',\n        disableIcon: false,\n        disableChat: false,\n        chatStatus: 1\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleShowChat\", function (name, id) {\n      console.log(name, id);\n      var userInfo = _this.props.userInfo;\n      var socket = _this.state.socket;\n\n      _this.setState({\n        showListX: '-100%',\n        showChat: '120%',\n        chatUser: name,\n        chatUserId: id,\n        disableIcon: true,\n        chatStatus: 2\n      });\n\n      var data = {\n        joiner: userInfo.uId,\n        chater: id\n      };\n      Emit('joinRoom', data, socket);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"joinRoom\", function (msg) {\n      _this.setState({\n        joinUser: msg.joiner,\n        roomId: msg.roomId\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"receiveMsg\", function (msg) {\n      var chatStatus = _this.state.chatStatus;\n\n      _this.setState({\n        msg: msg\n      });\n\n      if (chatStatus == 0) {\n        _this.setState({\n          showNote: true\n        });\n      } else if (chatStatus == 1) {\n        _this.setState({\n          sender: msg.sender,\n          showNote1: true\n        });\n      } else if (chatStatus == 2) {}\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSend\", function (method, data) {\n      Emit(method, data, _this.state.socket);\n    });\n\n    var _socket = Connect();\n\n    _this.state = {\n      showIcon: 1,\n      showListX: '-100%',\n      showChat: '-10%',\n      chatUser: null,\n      chatUserId: null,\n      disableIcon: false,\n      socket: _socket,\n      msg: [],\n      joinUser: null,\n      chatStatus: 0,\n      showNote: false,\n      showNote1: false,\n      sender: null,\n      roomId: null\n    };\n\n    _this.ready();\n\n    _this.handleShowList = _this.handleShowList.bind(_assertThisInitialized(_this));\n    _this.handleCloseList = _this.handleCloseList.bind(_assertThisInitialized(_this));\n    _this.handleShowChat = _this.handleShowChat.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Chat, [{\n    key: \"ready\",\n    value: function ready() {\n      var _this2 = this;\n\n      var socket = this.state.socket;\n      socket.on('join_room', function (msg) {\n        _this2.joinRoom(msg);\n      });\n      socket.on('receive_msg', function (msg) {\n        console.log(msg);\n\n        _this2.receiveMsg(msg);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"div\", {\n        style: {\n          position: 'fixed',\n          bottom: '0%',\n          left: '70%',\n          width: \"28%\",\n          height: \"50%\",\n          zIndex: 1\n        },\n        className: _JSXStyle.dynamic([[\"2775959721\", [this.state.showListX, this.state.showChat]]]),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        style: {\n          opacity: this.state.showIcon\n        },\n        className: _JSXStyle.dynamic([[\"2775959721\", [this.state.showListX, this.state.showChat]]]) + \" \" + \"showIcon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, __jsx(\"button\", {\n        type: \"button\",\n        disabled: this.state.disableIcon,\n        style: {\n          backgroundColor: 'white',\n          border: 'none'\n        },\n        onClick: this.handleShowList,\n        className: _JSXStyle.dynamic([[\"2775959721\", [this.state.showListX, this.state.showChat]]]),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, __jsx(\"img\", {\n        src: \"/static/icon.png\",\n        style: {\n          width: '60%'\n        },\n        className: _JSXStyle.dynamic([[\"2775959721\", [this.state.showListX, this.state.showChat]]]),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), this.state.showNote && __jsx(MdaccountCircle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }))), __jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"2775959721\", [this.state.showListX, this.state.showChat]]]) + \" \" + \"showList\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, __jsx(ShowChatList, {\n        onClick: this.handleCloseList,\n        showChat: this.handleShowChat,\n        showNote1: this.state.showNote1,\n        sender: this.state.sender,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      })), __jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"2775959721\", [this.state.showListX, this.state.showChat]]]) + \" \" + \"showChat\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, __jsx(ChatPannel, {\n        msg: this.state.msg,\n        socket: this.state.socket,\n        onSend: this.handleSend.bind(this),\n        joinUser: this.state.joinUser,\n        onClick: this.handleCloseChat,\n        otherUser: this.state.chatUser,\n        otherUserId: this.state.chatUserId,\n        roomId: this.state.roomId,\n        uId: this.props.userInfo.uId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      })), __jsx(_JSXStyle, {\n        id: \"2775959721\",\n        dynamic: [this.state.showListX, this.state.showChat],\n        __self: this\n      }, \".showIcon.__jsx-style-dynamic-selector{position:relative;width:50%;left:70%;top:70%;}.showList.__jsx-style-dynamic-selector{position:relative;width:100%;height:100%;bottom:\".concat(this.state.showListX, \";border:2px solid #ffd633;border-radius:8px;-webkit-transition:all 1s;transition:all 1s;background :#fafafa;overflow-Y:scroll;}.showChat.__jsx-style-dynamic-selector{position:relative;width:100%;height:100%;bottom:\").concat(this.state.showChat, \";border:2px solid #ffd633;border-radius:8px;-webkit-transition:all 1s;transition:all 1s;background :#fafafa;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFx3b3JrcGxhY2VcXGZyb250LWVuZFxccGFnZXNcXGNvbXBvbmVudHNcXENoYXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBeUl3QixBQUl1QyxBQU1ELEFBWUEsa0JBakJQLEFBT0EsQUFZQSxVQWxCRCxDQU9FLEFBWUEsUUFsQkosSUFPNEIsQUFZQSxJQWxCdkMsZ0NBTzZCLEFBWUEseUJBWFIsQUFZQSxrQkFYQyxBQVlBLDRDQVhDLEFBWUEsb0JBWEQsQUFhdEIsa0JBWkEiLCJmaWxlIjoiRDpcXHdvcmtwbGFjZVxcZnJvbnQtZW5kXFxwYWdlc1xcY29tcG9uZW50c1xcQ2hhdC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IHsgQ29ubmVjdCxPbixFbWl0LEdldCB9IGZyb20gJy4vaHR0cCdcclxuaW1wb3J0IFNob3dDaGF0TGlzdCBmcm9tICcuL0NoYXRMaXN0J1xyXG5pbXBvcnQgQ2hhdFBhbm5lbCBmcm9tICcuL0NoYXRQYW5uZWwnXHJcbmltcG9ydCAnLi4vdXRpbC9jb25maWcnXHJcbmltcG9ydCB7IE1kQWNjb3VudENpcmNsZSB9IGZyb20gXCJyZWFjdC1pY29ucy9tZFwiO1xyXG5cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDaGF0IGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgICAgIGNvbnN0IHNvY2tldCA9IENvbm5lY3QoKVxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHNob3dJY29uOjEsXHJcbiAgICAgICAgICAgIHNob3dMaXN0WDogJy0xMDAlJyxcclxuICAgICAgICAgICAgc2hvd0NoYXQ6Jy0xMCUnLFxyXG4gICAgICAgICAgICBjaGF0VXNlcjogbnVsbCxcclxuICAgICAgICAgICAgY2hhdFVzZXJJZDogbnVsbCxcclxuICAgICAgICAgICAgZGlzYWJsZUljb246IGZhbHNlLFxyXG4gICAgICAgICAgICBzb2NrZXQsXHJcbiAgICAgICAgICAgIG1zZzogW10sXHJcbiAgICAgICAgICAgIGpvaW5Vc2VyOm51bGwsXHJcbiAgICAgICAgICAgIGNoYXRTdGF0dXM6IDAsXHJcbiAgICAgICAgICAgIHNob3dOb3RlOiBmYWxzZSxcclxuICAgICAgICAgICAgc2hvd05vdGUxOiBmYWxzZSxcclxuICAgICAgICAgICAgc2VuZGVyOiBudWxsLFxyXG4gICAgICAgICAgICByb29tSWQ6IG51bGxcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVhZHkoKTtcclxuICAgICAgICB0aGlzLmhhbmRsZVNob3dMaXN0ID0gdGhpcy5oYW5kbGVTaG93TGlzdC5iaW5kKHRoaXMpXHJcbiAgICAgICAgdGhpcy5oYW5kbGVDbG9zZUxpc3QgPSB0aGlzLmhhbmRsZUNsb3NlTGlzdC5iaW5kKHRoaXMpXHJcbiAgICAgICAgdGhpcy5oYW5kbGVTaG93Q2hhdCA9IHRoaXMuaGFuZGxlU2hvd0NoYXQuYmluZCh0aGlzKVxyXG4gICAgfVxyXG4gICAgaGFuZGxlU2hvd0xpc3QgPSgpID0+e1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93TGlzdFg6ICcxMCUnLHNob3dJY29uOiAwLGNoYXRTdGF0dXM6MX0pXHJcblxyXG4gICAgfVxyXG4gICAgaGFuZGxlQ2xvc2VMaXN0PSgpPT57XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHNob3dMaXN0WDogJy0xMDAlJyxcclxuICAgICAgICAgICAgc2hvd0ljb246MSxcclxuICAgICAgICAgICAgY2hhdFN0YXR1czogMFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBoYW5kbGVDbG9zZUNoYXQ9KCk9PntcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgc2hvd0xpc3RYOiAnMTAlJyxcclxuICAgICAgICAgICAgc2hvd0NoYXQ6ICctMTAlJyxcclxuICAgICAgICAgICAgZGlzYWJsZUljb246IGZhbHNlLFxyXG4gICAgICAgICAgICBkaXNhYmxlQ2hhdDogZmFsc2UsXHJcbiAgICAgICAgICAgIGNoYXRTdGF0dXM6MVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBoYW5kbGVTaG93Q2hhdCA9IChuYW1lLGlkKSA9PntcclxuICAgICAgICBjb25zb2xlLmxvZyhuYW1lLGlkKVxyXG4gICAgICAgIGNvbnN0IHsgdXNlckluZm8gfSA9IHRoaXMucHJvcHNcclxuICAgICAgICBjb25zdCB7IHNvY2tldCB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBzaG93TGlzdFg6ICctMTAwJScsXHJcbiAgICAgICAgICAgIHNob3dDaGF0OiAnMTIwJScsXHJcbiAgICAgICAgICAgIGNoYXRVc2VyOiBuYW1lLFxyXG4gICAgICAgICAgICBjaGF0VXNlcklkOiBpZCxcclxuICAgICAgICAgICAgZGlzYWJsZUljb246dHJ1ZSxcclxuICAgICAgICAgICAgY2hhdFN0YXR1czogMlxyXG4gICAgICAgIH0pXHJcbiAgICAgICBcclxuICAgICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgICAgICBqb2luZXI6IHVzZXJJbmZvLnVJZCxcclxuICAgICAgICAgICAgY2hhdGVyOiBpZCxcclxuICAgICAgICB9XHJcbiAgICAgICAgRW1pdCgnam9pblJvb20nLGRhdGEsc29ja2V0KVxyXG4gICAgICBcclxuICAgIH1cclxuICAgIHJlYWR5KCl7XHJcbiAgICAgICAgY29uc3QgeyBzb2NrZXQgfSA9IHRoaXMuc3RhdGVcclxuXHJcbiAgICAgICAgc29ja2V0Lm9uKCdqb2luX3Jvb20nLChtc2cpPT57XHJcbiAgICAgICAgICAgIHRoaXMuam9pblJvb20obXNnKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHNvY2tldC5vbigncmVjZWl2ZV9tc2cnLChtc2cpPT57XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG1zZylcclxuICAgICAgICAgICAgdGhpcy5yZWNlaXZlTXNnKG1zZylcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgam9pblJvb20gPSAobXNnKT0+eyBcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgam9pblVzZXI6IG1zZy5qb2luZXIsXHJcbiAgICAgICAgICAgIHJvb21JZDogbXNnLnJvb21JZFxyXG4gICAgICAgIH0pICBcclxuICAgIH1cclxuXHJcbiAgICByZWNlaXZlTXNnID0gKG1zZykgPT57XHJcbiAgICAgICAgY29uc3QgeyBjaGF0U3RhdHVzIH0gPSB0aGlzLnN0YXRlXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIG1zZzptc2dcclxuICAgICAgICB9KVxyXG4gICAgICBcclxuICAgICAgICBpZihjaGF0U3RhdHVzID09MCl7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgc2hvd05vdGU6IHRydWVcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9ZWxzZSBpZiggY2hhdFN0YXR1cyA9PSAxKXtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBzZW5kZXI6bXNnLnNlbmRlcixcclxuICAgICAgICAgICAgICAgIHNob3dOb3RlMTogdHJ1ZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1lbHNlIGlmKCBjaGF0U3RhdHVzPT0yKXtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICBcclxuICAgIH1cclxuICAgIGhhbmRsZVNlbmQgPSAoIG1ldGhvZCxkYXRhICk9PntcclxuICAgICAgICBFbWl0KG1ldGhvZCxkYXRhLHRoaXMuc3RhdGUuc29ja2V0KVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgc3R5bGU9e3twb3NpdGlvbjogJ2ZpeGVkJyxib3R0b206ICcwJScsbGVmdDogJzcwJScsd2lkdGg6XCIyOCVcIixoZWlnaHQ6XCI1MCVcIix6SW5kZXg6MX19PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNob3dJY29uXCIgc3R5bGU9e3tvcGFjaXR5OnRoaXMuc3RhdGUuc2hvd0ljb259fT4gXHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9J2J1dHRvbicgZGlzYWJsZWQ9e3RoaXMuc3RhdGUuZGlzYWJsZUljb259IHN0eWxlPXt7YmFja2dyb3VuZENvbG9yOid3aGl0ZScsYm9yZGVyOidub25lJ319IG9uQ2xpY2s9e3RoaXMuaGFuZGxlU2hvd0xpc3R9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPScvc3RhdGljL2ljb24ucG5nJyBzdHlsZT17e3dpZHRoOic2MCUnfX0vPnt0aGlzLnN0YXRlLnNob3dOb3RlJiY8TWRBY2NvdW50Q2lyY2xlIC8+fVxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+ICAgICAgXHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2hvd0xpc3RcIj5cclxuICAgICAgICAgICAgICAgICAgICA8U2hvd0NoYXRMaXN0IG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xvc2VMaXN0fSBzaG93Q2hhdD17dGhpcy5oYW5kbGVTaG93Q2hhdH0gc2hvd05vdGUxPXt0aGlzLnN0YXRlLnNob3dOb3RlMX1cclxuICAgICAgICAgICAgICAgICAgICBzZW5kZXIgPSB7dGhpcy5zdGF0ZS5zZW5kZXJ9Lz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaG93Q2hhdFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIDxDaGF0UGFubmVsIG1zZz17dGhpcy5zdGF0ZS5tc2d9IHNvY2tldD17dGhpcy5zdGF0ZS5zb2NrZXR9IG9uU2VuZD17dGhpcy5oYW5kbGVTZW5kLmJpbmQodGhpcyl9IGpvaW5Vc2VyPXt0aGlzLnN0YXRlLmpvaW5Vc2VyfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xvc2VDaGF0fSBvdGhlclVzZXI9e3RoaXMuc3RhdGUuY2hhdFVzZXJ9IG90aGVyVXNlcklkPXt0aGlzLnN0YXRlLmNoYXRVc2VySWR9IHJvb21JZD17dGhpcy5zdGF0ZS5yb29tSWR9XHJcbiAgICAgICAgICAgICAgICAgICAgdUlkPXt0aGlzLnByb3BzLnVzZXJJbmZvLnVJZH0vPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxzdHlsZSBqc3g+e2BcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC5zaG93SWNvbiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiA1MCU7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogNzAlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcDo3MCU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAuc2hvd0xpc3Qge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDoxMDAlO1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDoxMDAlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbToke3RoaXMuc3RhdGUuc2hvd0xpc3RYfTtcclxuICAgICAgICAgICAgICAgICAgICBib3JkZXI6MnB4IHNvbGlkICAjZmZkNjMzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6OHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAxcztcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kIDojZmFmYWZhO1xyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93LVk6IHNjcm9sbDsgICAgICBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAuc2hvd0NoYXQge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1xyXG4gICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDoxMDAlO1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDoxMDAlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbToke3RoaXMuc3RhdGUuc2hvd0NoYXR9O1xyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlcjoycHggc29saWQgICNmZmQ2MzM7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czo4cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDFzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQgOiNmYWZhZmE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGB9PC9zdHlsZT5cclxuICAgICAgICAgICBcclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICApXHJcbiAgICB9XHJcbn1cclxuIl19 */\\n/*@ sourceURL=D:\\\\workplace\\\\front-end\\\\pages\\\\components\\\\Chat.js */\")));\n    }\n  }]);\n\n  return Chat;\n}(Component);\n\nexport { Chat as default };","map":{"version":3,"sources":["D:\\workplace\\front-end\\pages\\components\\Chat.js"],"names":["React","Component","Connect","On","Emit","Get","ShowChatList","ChatPannel","MdaccountCircle","Chat","props","setState","showListX","showIcon","chatStatus","showChat","disableIcon","disableChat","name","id","console","log","userInfo","socket","state","chatUser","chatUserId","data","joiner","uId","chater","msg","joinUser","roomId","showNote","sender","showNote1","method","ready","handleShowList","bind","handleCloseList","handleShowChat","on","joinRoom","receiveMsg","position","bottom","left","width","height","zIndex","opacity","backgroundColor","border","handleSend","handleCloseChat"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Connect,On,Emit,Get } from './http'\r\nimport ShowChatList from './ChatList'\r\nimport ChatPannel from './ChatPannel'\r\nimport '../util/config'\r\nimport { MdaccountCircle } from \"react-icons/md\";\r\n\r\n\r\n\r\nexport default class Chat extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        const socket = Connect()\r\n        this.state = {\r\n            showIcon:1,\r\n            showListX: '-100%',\r\n            showChat:'-10%',\r\n            chatUser: null,\r\n            chatUserId: null,\r\n            disableIcon: false,\r\n            socket,\r\n            msg: [],\r\n            joinUser:null,\r\n            chatStatus: 0,\r\n            showNote: false,\r\n            showNote1: false,\r\n            sender: null,\r\n            roomId: null\r\n\r\n        }\r\n        this.ready();\r\n        this.handleShowList = this.handleShowList.bind(this)\r\n        this.handleCloseList = this.handleCloseList.bind(this)\r\n        this.handleShowChat = this.handleShowChat.bind(this)\r\n    }\r\n    handleShowList =() =>{\r\n        this.setState({ showListX: '10%',showIcon: 0,chatStatus:1})\r\n\r\n    }\r\n    handleCloseList=()=>{\r\n        this.setState({\r\n            showListX: '-100%',\r\n            showIcon:1,\r\n            chatStatus: 0\r\n        })\r\n    }\r\n    handleCloseChat=()=>{\r\n        this.setState({\r\n            showListX: '10%',\r\n            showChat: '-10%',\r\n            disableIcon: false,\r\n            disableChat: false,\r\n            chatStatus:1\r\n        })\r\n    }\r\n    handleShowChat = (name,id) =>{\r\n        console.log(name,id)\r\n        const { userInfo } = this.props\r\n        const { socket } = this.state\r\n        this.setState({\r\n            showListX: '-100%',\r\n            showChat: '120%',\r\n            chatUser: name,\r\n            chatUserId: id,\r\n            disableIcon:true,\r\n            chatStatus: 2\r\n        })\r\n       \r\n        const data = {\r\n            joiner: userInfo.uId,\r\n            chater: id,\r\n        }\r\n        Emit('joinRoom',data,socket)\r\n      \r\n    }\r\n    ready(){\r\n        const { socket } = this.state\r\n\r\n        socket.on('join_room',(msg)=>{\r\n            this.joinRoom(msg)\r\n        })\r\n\r\n        socket.on('receive_msg',(msg)=>{\r\n            console.log(msg)\r\n            this.receiveMsg(msg)\r\n        })\r\n    }\r\n    joinRoom = (msg)=>{ \r\n        this.setState({\r\n            joinUser: msg.joiner,\r\n            roomId: msg.roomId\r\n        })  \r\n    }\r\n\r\n    receiveMsg = (msg) =>{\r\n        const { chatStatus } = this.state\r\n        this.setState({\r\n            msg:msg\r\n        })\r\n      \r\n        if(chatStatus ==0){\r\n            this.setState({\r\n                showNote: true\r\n            })\r\n        }else if( chatStatus == 1){\r\n            this.setState({\r\n                sender:msg.sender,\r\n                showNote1: true\r\n            })\r\n        }else if( chatStatus==2){\r\n\r\n        }\r\n      \r\n    }\r\n    handleSend = ( method,data )=>{\r\n        Emit(method,data,this.state.socket)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n        <div style={{position: 'fixed',bottom: '0%',left: '70%',width:\"28%\",height:\"50%\",zIndex:1}}>\r\n            <div className=\"showIcon\" style={{opacity:this.state.showIcon}}> \r\n                <button type='button' disabled={this.state.disableIcon} style={{backgroundColor:'white',border:'none'}} onClick={this.handleShowList}>\r\n                    <img src='/static/icon.png' style={{width:'60%'}}/>{this.state.showNote&&<MdaccountCircle />}\r\n                </button>      \r\n            </div>\r\n            \r\n                <div className=\"showList\">\r\n                    <ShowChatList onClick={this.handleCloseList} showChat={this.handleShowChat} showNote1={this.state.showNote1}\r\n                    sender = {this.state.sender}/>\r\n                </div>\r\n                <div className=\"showChat\">\r\n                    \r\n                    <ChatPannel msg={this.state.msg} socket={this.state.socket} onSend={this.handleSend.bind(this)} joinUser={this.state.joinUser}\r\n                    onClick={this.handleCloseChat} otherUser={this.state.chatUser} otherUserId={this.state.chatUserId} roomId={this.state.roomId}\r\n                    uId={this.props.userInfo.uId}/>\r\n                </div>\r\n            <style jsx>{`\r\n              \r\n                .showIcon {\r\n                    position: relative;\r\n                    width: 50%;\r\n                    left: 70%;\r\n                    top:70%;\r\n                }\r\n                .showList {\r\n                    position:relative;\r\n            \r\n                    width:100%;\r\n                    height:100%;\r\n                    bottom:${this.state.showListX};\r\n                    border:2px solid  #ffd633;\r\n                    border-radius:8px;\r\n                    transition: all 1s;\r\n                    background :#fafafa;\r\n                    overflow-Y: scroll;      \r\n                };\r\n                .showChat {\r\n                    position:relative;\r\n                  \r\n                    width:100%;\r\n                    height:100%;\r\n                    bottom:${this.state.showChat};\r\n                    border:2px solid  #ffd633;\r\n                    border-radius:8px;\r\n                    transition: all 1s;\r\n                    background :#fafafa;\r\n                         \r\n                };\r\n              \r\n            `}</style>\r\n           \r\n        </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}