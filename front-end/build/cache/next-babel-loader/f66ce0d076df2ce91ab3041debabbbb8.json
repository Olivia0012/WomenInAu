{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\workplace\\\\front-end\\\\pages\\\\signin.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from \"./components/myLayoutBefore\";\nimport bcrypt from \"bcryptjs\";\nimport Router from 'next/router';\nimport { Alert } from './components/warnAlert';\nimport { Post } from \"./components/http\";\nimport css from './css/app.css';\nvar boxStyle = {\n  position: 'relative',\n  left: '20%',\n  textAlign: 'center',\n  width: \"60%\",\n  marginBottom: '20px',\n  padding: '30px',\n  border: '2px solid  #ffd633',\n  borderRadius: '2px'\n};\nvar bannerStyle = {\n  position: 'relative',\n  left: '20%',\n  textAlign: 'center',\n  marginTop: \"20px\",\n  width: \"60%\",\n  padding: '10px 10px',\n  border: '2px solid  #ffd633',\n  backgroundColor: \"#ffd633\",\n  borderRadius: '2px'\n};\nvar inputStyle = {\n  margin: 30,\n  outlineStyle: 'none',\n  border: '1px solid #ccc',\n  borderRadius: '3px',\n  padding: '10px 10px',\n  width: '70%',\n  fontSize: '24px',\n  fontFamily: \"Microsoft soft\"\n};\nvar salt = bcrypt.genSaltSync(10);\n\nvar signin =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(signin, _React$Component);\n\n  function signin(props) {\n    var _this;\n\n    _classCallCheck(this, signin);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(signin).call(this, props));\n    _this.state = {\n      email: '',\n      password: '',\n      showAlert: 'none',\n      err: '',\n      data: ''\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    _this.handleClose = _this.handleClose.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(signin, [{\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      var name = event.target.name;\n      var val = event.target.value;\n      this.setState(_defineProperty({}, name, val));\n    }\n  }, {\n    key: \"handleClose\",\n    value: function handleClose() {\n      this.setState({\n        showAlert: 'none'\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      var _this2 = this;\n\n      event.preventDefault();\n      var psw = bcrypt.hashSync(this.state.password, salt);\n      console.log(psw);\n      var data = {\n        email: this.state.email,\n        password: psw\n      };\n      Post('signin', data).then(function (res) {\n        console.log(res);\n\n        if (res == '-1' || res == '-2') {\n          _this2.setState({\n            showAlert: ' block'\n          });\n\n          _this2.setState({\n            err: res\n          });\n        } else {\n          var same = bcrypt.compareSync(_this2.state.password, res.password);\n          console.log(same);\n\n          if (same) {\n            localStorage.setItem('uId', res.uId);\n            localStorage.setItem('role', res.role);\n            Router.push({\n              pathname: '/',\n              query: res\n            });\n          } else {\n            _this2.setState({\n              showAlert: ' block'\n            });\n          }\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, __jsx(Layout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }), __jsx(\"div\", {\n        style: {\n          display: this.state.showAlert\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, this.state.err == '-1' ? __jsx(Alert, {\n        title: \"warning!\",\n        content: \"Invalid email or password!\",\n        onClick: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }) : __jsx(Alert, {\n        title: \"warning!\",\n        content: \"Your application has not been approved! Please wait.\",\n        onClick: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      })), __jsx(\"div\", {\n        style: bannerStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, __jsx(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"Sign in\")), __jsx(\"form\", {\n        onSubmit: this.handleSubmit,\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        style: boxStyle,\n        className: \"jsx-3193488362\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, __jsx(\"input\", {\n        required: \"required\",\n        type: \"email\",\n        name: \"email\",\n        placeholder: \"Enter your email\",\n        value: this.state.value,\n        onChange: this.handleChange,\n        className: \"jsx-3193488362\" + \" \" + (css.input || \"\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), __jsx(\"br\", {\n        className: \"jsx-3193488362\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), __jsx(\"input\", {\n        style: inputStyle,\n        required: \"required\",\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"Enter your password\",\n        value: this.state.value,\n        onChange: this.handleChange,\n        className: \"jsx-3193488362\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), __jsx(\"br\", {\n        className: \"jsx-3193488362\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), __jsx(\"button\", {\n        type: \"submit\",\n        style: {\n          borderRadius: \"4px\",\n          marginTop: \"20px\"\n        },\n        className: \"jsx-3193488362\" + \" \" + \"btn btn-primary btn-lg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Sign in\"), __jsx(_JSXStyle, {\n        id: \"3193488362\",\n        __self: this\n      }, \"input.jsx-3193488362:focus{border-color:#66afe9;outline:0;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6);box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6);}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFx3b3JrcGxhY2VcXGZyb250LWVuZFxccGFnZXNcXHNpZ25pbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFzSGdDLEFBR2tELHFCQUNYLFVBQ3VFLGlGQUV0Rix5RUFBQyIsImZpbGUiOiJEOlxcd29ya3BsYWNlXFxmcm9udC1lbmRcXHBhZ2VzXFxzaWduaW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTGF5b3V0IGZyb20gXCIuL2NvbXBvbmVudHMvbXlMYXlvdXRCZWZvcmVcIjtcclxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIjtcclxuaW1wb3J0IFJvdXRlciBmcm9tICduZXh0L3JvdXRlcic7XHJcbmltcG9ydCB7QWxlcnR9IGZyb20gJy4vY29tcG9uZW50cy93YXJuQWxlcnQnO1xyXG5pbXBvcnQgeyBQb3N0IH0gZnJvbSBcIi4vY29tcG9uZW50cy9odHRwXCI7XHJcbmltcG9ydCBjc3MgZnJvbSAnLi9jc3MvYXBwLmNzcydcclxuXHJcbmNvbnN0IGJveFN0eWxlPXtcclxuICAgIHBvc2l0aW9uOidyZWxhdGl2ZScsXHJcbiAgICBsZWZ0OicyMCUnLFxyXG4gICAgdGV4dEFsaWduOidjZW50ZXInLFxyXG4gICAgd2lkdGg6XCI2MCVcIixcclxuICAgIG1hcmdpbkJvdHRvbTonMjBweCcsXHJcbiAgICBwYWRkaW5nOiczMHB4JyxcclxuICAgIGJvcmRlcjonMnB4IHNvbGlkICAjZmZkNjMzJyxcclxuICAgIGJvcmRlclJhZGl1czonMnB4JyxcclxuICAgIFxyXG59OyAgIFxyXG5jb25zdCBiYW5uZXJTdHlsZSA9e1xyXG4gICAgcG9zaXRpb246J3JlbGF0aXZlJyxcclxuICAgIGxlZnQ6JzIwJScsXHJcbiAgICB0ZXh0QWxpZ246J2NlbnRlcicsXHJcbiAgICBtYXJnaW5Ub3A6XCIyMHB4XCIsXHJcbiAgICB3aWR0aDpcIjYwJVwiLFxyXG4gICAgcGFkZGluZzogJzEwcHggMTBweCcsXHJcbiAgICBib3JkZXI6JzJweCBzb2xpZCAgI2ZmZDYzMycsXHJcbiAgICBiYWNrZ3JvdW5kQ29sb3I6XCIjZmZkNjMzXCIsXHJcbiAgICBib3JkZXJSYWRpdXM6JzJweCcsXHJcbn07XHJcblxyXG5jb25zdCBpbnB1dFN0eWxlID17XHJcbiAgICBtYXJnaW46IDMwLFxyXG4gICAgb3V0bGluZVN0eWxlOiAnbm9uZScgLFxyXG4gICAgYm9yZGVyOiAnMXB4IHNvbGlkICNjY2MnLFxyXG4gICAgYm9yZGVyUmFkaXVzOiAnM3B4JyxcclxuICAgIHBhZGRpbmc6ICcxMHB4IDEwcHgnLFxyXG4gICAgd2lkdGg6ICc3MCUnLFxyXG4gICAgZm9udFNpemU6ICcyNHB4JyxcclxuICAgIGZvbnRGYW1pbHk6IFwiTWljcm9zb2Z0IHNvZnRcIixcclxuXHJcbn07XHJcbnZhciBzYWx0ID0gYmNyeXB0LmdlblNhbHRTeW5jKDEwKTtcclxuY2xhc3Mgc2lnbmluIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50e1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtlbWFpbDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNob3dBbGVydDogJ25vbmUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTonJ1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgICAgdGhpcy5oYW5kbGVDaGFuZ2UgPSB0aGlzLmhhbmRsZUNoYW5nZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlU3VibWl0ID0gdGhpcy5oYW5kbGVTdWJtaXQuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmhhbmRsZUNsb3NlID0gdGhpcy5oYW5kbGVDbG9zZS5iaW5kKHRoaXMpXHJcbiAgICAgIH1cclxuICAgIFxyXG4gICAgaGFuZGxlQ2hhbmdlKGV2ZW50KSB7XHJcbiAgICAgICAgbGV0IG5hbWUgPSBldmVudC50YXJnZXQubmFtZTtcclxuICAgICAgICBsZXQgdmFsID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1tuYW1lXTogdmFsfSk7XHJcbiAgICAgICBcclxuICAgIH1cclxuICAgIGhhbmRsZUNsb3NlKCl7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHNob3dBbGVydDonbm9uZSdcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgaGFuZGxlU3VibWl0KGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgcHN3ID0gYmNyeXB0Lmhhc2hTeW5jKHRoaXMuc3RhdGUucGFzc3dvcmQsIHNhbHQpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHBzdylcclxuICAgICAgICB2YXIgZGF0YSA9e1xyXG4gICAgICAgICAgICBlbWFpbDp0aGlzLnN0YXRlLmVtYWlsLFxyXG4gICAgICAgICAgICBwYXNzd29yZDpwc3dcclxuICAgICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAgIFBvc3QoJ3NpZ25pbicsIGRhdGEpLnRoZW4ocmVzPT57XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcylcclxuICAgICAgICAgICAgaWYocmVzPT0nLTEnfHwgcmVzID09ICctMicpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2hvd0FsZXJ0OiAnIGJsb2NrJ30pXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtlcnI6IHJlc30pXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2FtZSA9IGJjcnlwdC5jb21wYXJlU3luYyh0aGlzLnN0YXRlLnBhc3N3b3JkLHJlcy5wYXNzd29yZClcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNhbWUpXHJcbiAgICAgICAgICAgICAgICBpZihzYW1lKXtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndUlkJyxyZXMudUlkKTtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncm9sZScscmVzLnJvbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aG5hbWU6Jy8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeTogcmVzXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3dBbGVydDogJyBibG9jayd9KVxyXG4gICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICBcclxuICAgIFxyXG4gICAgfVxyXG4gICAgICAgIFxyXG4gICAgICByZW5kZXIoKXtcclxuICAgICAgICByZXR1cm4oXHJcbiAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICA8TGF5b3V0Lz5cclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tkaXNwbGF5OiB0aGlzLnN0YXRlLnNob3dBbGVydH19PlxyXG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmVycj09Jy0xJz88QWxlcnQgdGl0bGUgPSd3YXJuaW5nIScgY29udGVudCA9ICdJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkIScgb25DbGljaz17dGhpcy5oYW5kbGVDbG9zZX0vPjpcclxuICAgICAgICAgICAgICAgICAgICA8QWxlcnQgdGl0bGUgPSd3YXJuaW5nIScgY29udGVudCA9ICdZb3VyIGFwcGxpY2F0aW9uIGhhcyBub3QgYmVlbiBhcHByb3ZlZCEgUGxlYXNlIHdhaXQuJyBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsb3NlfS8+fVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXtiYW5uZXJTdHlsZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+U2lnbiBpbjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e3RoaXMuaGFuZGxlU3VibWl0fSBzdHlsZT17e3RleHRBbGlnbjogJ2NlbnRlcid9fT5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXtib3hTdHlsZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzTmFtZT17Y3NzLmlucHV0fSByZXF1aXJlZD1cInJlcXVpcmVkXCIgdHlwZT1cImVtYWlsXCIgbmFtZT0gXCJlbWFpbFwiIHBsYWNlaG9sZGVyPVwiRW50ZXIgeW91ciBlbWFpbFwiIHZhbHVlPXt0aGlzLnN0YXRlLnZhbHVlfSBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9Lz48YnIvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBzdHlsZSA9IHtpbnB1dFN0eWxlfSByZXF1aXJlZD1cInJlcXVpcmVkXCIgdHlwZT1cInBhc3N3b3JkXCIgbmFtZSA9IFwicGFzc3dvcmRcIiBwbGFjZWhvbGRlcj1cIkVudGVyIHlvdXIgcGFzc3dvcmRcIiB2YWx1ZT17dGhpcy5zdGF0ZS52YWx1ZX0gb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfS8+PGJyLz5cclxuICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzTmFtZT1cImJ0biBidG4tcHJpbWFyeSBidG4tbGdcIiBzdHlsZT17e2JvcmRlclJhZGl1czpcIjRweFwiLG1hcmdpblRvcDpcIjIwcHhcIn19PlNpZ24gaW48L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PntgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OmZvY3Vze1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAjNjZhZmU5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0bGluZTogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwwLDAsLjA3NSksMCAwIDhweCByZ2JhKDEwMiwxNzUsMjMzLC42KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDFweCByZ2JhKDAsMCwwLC4wNzUpLDAgMCA4cHggcmdiYSgxMDIsMTc1LDIzMywuNilcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGB9PC9zdHlsZT5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZm9ybT4gXHJcbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7dGV4dEFsaWduOidjZW50ZXInfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7Y29sb3I6J3JlZCd9fT5oYXZlIG5vIGFjY291bnQ/Jm5ic3A7Jm5ic3A7PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPScvc2lnbnVwJz5zaWduIHVwPC9hPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgPC9kaXY+IFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IHNpZ25pbjsiXX0= */\\n/*@ sourceURL=D:\\\\workplace\\\\front-end\\\\pages\\\\signin.js */\"))), __jsx(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, __jsx(\"span\", {\n        style: {\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"have no account?\\xA0\\xA0\"), __jsx(\"a\", {\n        href: \"/signup\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"sign up\")));\n    }\n  }]);\n\n  return signin;\n}(React.Component);\n\nexport default signin;","map":{"version":3,"sources":["D:\\workplace\\front-end\\pages\\signin.js"],"names":["Layout","bcrypt","Router","Alert","Post","css","boxStyle","position","left","textAlign","width","marginBottom","padding","border","borderRadius","bannerStyle","marginTop","backgroundColor","inputStyle","margin","outlineStyle","fontSize","fontFamily","salt","genSaltSync","signin","props","state","email","password","showAlert","err","data","handleChange","bind","handleSubmit","handleClose","event","name","target","val","value","setState","preventDefault","psw","hashSync","console","log","then","res","same","compareSync","localStorage","setItem","uId","role","push","pathname","query","display","input","color","React","Component"],"mappings":"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","sourcesContent":["import Layout from \"./components/myLayoutBefore\";\r\nimport bcrypt from \"bcryptjs\";\r\nimport Router from 'next/router';\r\nimport {Alert} from './components/warnAlert';\r\nimport { Post } from \"./components/http\";\r\nimport css from './css/app.css'\r\n\r\nconst boxStyle={\r\n    position:'relative',\r\n    left:'20%',\r\n    textAlign:'center',\r\n    width:\"60%\",\r\n    marginBottom:'20px',\r\n    padding:'30px',\r\n    border:'2px solid  #ffd633',\r\n    borderRadius:'2px',\r\n    \r\n};   \r\nconst bannerStyle ={\r\n    position:'relative',\r\n    left:'20%',\r\n    textAlign:'center',\r\n    marginTop:\"20px\",\r\n    width:\"60%\",\r\n    padding: '10px 10px',\r\n    border:'2px solid  #ffd633',\r\n    backgroundColor:\"#ffd633\",\r\n    borderRadius:'2px',\r\n};\r\n\r\nconst inputStyle ={\r\n    margin: 30,\r\n    outlineStyle: 'none' ,\r\n    border: '1px solid #ccc',\r\n    borderRadius: '3px',\r\n    padding: '10px 10px',\r\n    width: '70%',\r\n    fontSize: '24px',\r\n    fontFamily: \"Microsoft soft\",\r\n\r\n};\r\nvar salt = bcrypt.genSaltSync(10);\r\nclass signin extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {email: '',\r\n                    password: '',\r\n                    showAlert: 'none',\r\n                    err: '',\r\n                    data:''\r\n                };\r\n      \r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleClose = this.handleClose.bind(this)\r\n      }\r\n    \r\n    handleChange(event) {\r\n        let name = event.target.name;\r\n        let val = event.target.value;\r\n        this.setState({[name]: val});\r\n       \r\n    }\r\n    handleClose(){\r\n        this.setState({\r\n            showAlert:'none'\r\n        })\r\n    }\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        var psw = bcrypt.hashSync(this.state.password, salt);\r\n        console.log(psw)\r\n        var data ={\r\n            email:this.state.email,\r\n            password:psw\r\n        }\r\n      \r\n        Post('signin', data).then(res=>{\r\n            console.log(res)\r\n            if(res=='-1'|| res == '-2'){\r\n                this.setState({showAlert: ' block'})\r\n                this.setState({err: res})\r\n            }else{\r\n                const same = bcrypt.compareSync(this.state.password,res.password)\r\n                console.log(same)\r\n                if(same){\r\n                    localStorage.setItem('uId',res.uId);\r\n                    localStorage.setItem('role',res.role);\r\n                    Router.push({\r\n                        pathname:'/',\r\n                        query: res\r\n                    })\r\n                }else{\r\n                    this.setState({showAlert: ' block'})\r\n                } \r\n            }\r\n        })\r\n       \r\n    \r\n    }\r\n        \r\n      render(){\r\n        return(\r\n            <div>\r\n                <Layout/>\r\n                <div style={{display: this.state.showAlert}}>\r\n                    {this.state.err=='-1'?<Alert title ='warning!' content = 'Invalid email or password!' onClick={this.handleClose}/>:\r\n                    <Alert title ='warning!' content = 'Your application has not been approved! Please wait.' onClick={this.handleClose}/>}\r\n                </div>\r\n                <div style={bannerStyle}>\r\n                    <span>Sign in</span>\r\n                </div>\r\n                <form onSubmit={this.handleSubmit} style={{textAlign: 'center'}}>\r\n                    <div style={boxStyle}>\r\n                    <input className={css.input} required=\"required\" type=\"email\" name= \"email\" placeholder=\"Enter your email\" value={this.state.value} onChange={this.handleChange}/><br/>\r\n                    <input style = {inputStyle} required=\"required\" type=\"password\" name = \"password\" placeholder=\"Enter your password\" value={this.state.value} onChange={this.handleChange}/><br/>\r\n                   \r\n                    <button type=\"submit\" className=\"btn btn-primary btn-lg\" style={{borderRadius:\"4px\",marginTop:\"20px\"}}>Sign in</button>\r\n                    <style jsx>{`\r\n                        input:focus{\r\n                            border-color: #66afe9;\r\n                            outline: 0;\r\n                            -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6);\r\n                            box-shadow: inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)\r\n                        }\r\n                    `}</style>\r\n                    </div>\r\n                </form> \r\n                <div style={{textAlign:'center'}}>\r\n                        <span style={{color:'red'}}>have no account?&nbsp;&nbsp;</span>\r\n                        <a href='/signup'>sign up</a>\r\n                </div>\r\n                \r\n            </div> \r\n        );\r\n    }\r\n\r\n}\r\nexport default signin;"]},"metadata":{},"sourceType":"module"}