{"ast":null,"code":"var _jsxFileName = \"D:\\\\workplace\\\\front-end\\\\pages\\\\signin.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from \"./components/myLayoutBefore\";\nimport bcrypt from \"bcryptjs\";\nimport Router from 'next/router';\nimport { Alert } from './components/warnAlert';\nimport { Post } from \"./components/http\";\nimport css from './css/style.css';\nconst boxStyle = {\n  position: 'relative',\n  left: '20%',\n  textAlign: 'center',\n  width: \"60%\",\n  marginBottom: '20px',\n  padding: '30px',\n  border: '2px solid  #ffd633',\n  borderRadius: '2px'\n};\nconst bannerStyle = {\n  position: 'relative',\n  left: '20%',\n  textAlign: 'center',\n  marginTop: \"20px\",\n  width: \"60%\",\n  padding: '10px 10px',\n  border: '2px solid  #ffd633',\n  backgroundColor: \"#ffd633\",\n  borderRadius: '2px'\n};\nconst inputStyle = {\n  margin: 30,\n  outlineStyle: 'none',\n  border: '1px solid #ccc',\n  borderRadius: '3px',\n  padding: '10px 10px',\n  width: '70%',\n  fontSize: '24px',\n  fontFamily: \"Microsoft soft\"\n};\nvar salt = bcrypt.genSaltSync(10);\n\nclass signin extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      password: '',\n      showAlert: 'none',\n      err: '',\n      data: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n  }\n\n  handleChange(event) {\n    let name = event.target.name;\n    let val = event.target.value;\n    this.setState({\n      [name]: val\n    });\n  }\n\n  handleClose() {\n    this.setState({\n      showAlert: 'none'\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    var psw = bcrypt.hashSync(this.state.password, salt);\n    console.log(psw);\n    var data = {\n      email: this.state.email,\n      password: psw\n    };\n    Post('signin', data).then(res => {\n      console.log(res);\n\n      if (res == '-1' || res == '-2') {\n        this.setState({\n          showAlert: ' block'\n        });\n        this.setState({\n          err: res\n        });\n      } else {\n        const same = bcrypt.compareSync(this.state.password, res.password);\n        console.log(same);\n\n        if (same) {\n          localStorage.setItem('uId', res.uId);\n          localStorage.setItem('role', res.role);\n          Router.push({\n            pathname: '/',\n            query: res\n          });\n        } else {\n          this.setState({\n            showAlert: ' block'\n          });\n        }\n      }\n    });\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, __jsx(Layout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), __jsx(\"div\", {\n      style: {\n        display: this.state.showAlert\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, this.state.err == '-1' ? __jsx(Alert, {\n      title: \"warning!\",\n      content: \"Invalid email or password!\",\n      onClick: this.handleClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }) : __jsx(Alert, {\n      title: \"warning!\",\n      content: \"Your application has not been approved! Please wait.\",\n      onClick: this.handleClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    })), __jsx(\"div\", {\n      style: bannerStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, __jsx(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"Sign in\")), __jsx(\"form\", {\n      onSubmit: this.handleSubmit,\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      style: boxStyle,\n      className: \"jsx-3193488362\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, __jsx(\"input\", {\n      required: \"required\",\n      type: \"email\",\n      name: \"email\",\n      placeholder: \"Enter your email\",\n      value: this.state.value,\n      onChange: this.handleChange,\n      className: \"jsx-3193488362\" + \" \" + (css.input || \"\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), __jsx(\"br\", {\n      className: \"jsx-3193488362\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), __jsx(\"input\", {\n      style: inputStyle,\n      required: \"required\",\n      type: \"password\",\n      name: \"password\",\n      placeholder: \"Enter your password\",\n      value: this.state.value,\n      onChange: this.handleChange,\n      className: \"jsx-3193488362\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }), __jsx(\"br\", {\n      className: \"jsx-3193488362\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }), __jsx(\"button\", {\n      type: \"submit\",\n      style: {\n        borderRadius: \"4px\",\n        marginTop: \"20px\"\n      },\n      className: \"jsx-3193488362\" + \" \" + \"btn btn-primary btn-lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Sign in\"), __jsx(_JSXStyle, {\n      id: \"3193488362\",\n      __self: this\n    }, \"input.jsx-3193488362:focus{border-color:#66afe9;outline:0;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6);box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6);}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFx3b3JrcGxhY2VcXGZyb250LWVuZFxccGFnZXNcXHNpZ25pbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFzSGdDLEFBR2tELHFCQUNYLFVBQ3VFLGlGQUV0Rix5RUFBQyIsImZpbGUiOiJEOlxcd29ya3BsYWNlXFxmcm9udC1lbmRcXHBhZ2VzXFxzaWduaW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTGF5b3V0IGZyb20gXCIuL2NvbXBvbmVudHMvbXlMYXlvdXRCZWZvcmVcIjtcclxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIjtcclxuaW1wb3J0IFJvdXRlciBmcm9tICduZXh0L3JvdXRlcic7XHJcbmltcG9ydCB7QWxlcnR9IGZyb20gJy4vY29tcG9uZW50cy93YXJuQWxlcnQnO1xyXG5pbXBvcnQgeyBQb3N0IH0gZnJvbSBcIi4vY29tcG9uZW50cy9odHRwXCI7XHJcbmltcG9ydCBjc3MgZnJvbSAnLi9jc3Mvc3R5bGUuY3NzJ1xyXG5cclxuY29uc3QgYm94U3R5bGU9e1xyXG4gICAgcG9zaXRpb246J3JlbGF0aXZlJyxcclxuICAgIGxlZnQ6JzIwJScsXHJcbiAgICB0ZXh0QWxpZ246J2NlbnRlcicsXHJcbiAgICB3aWR0aDpcIjYwJVwiLFxyXG4gICAgbWFyZ2luQm90dG9tOicyMHB4JyxcclxuICAgIHBhZGRpbmc6JzMwcHgnLFxyXG4gICAgYm9yZGVyOicycHggc29saWQgICNmZmQ2MzMnLFxyXG4gICAgYm9yZGVyUmFkaXVzOicycHgnLFxyXG4gICAgXHJcbn07ICAgXHJcbmNvbnN0IGJhbm5lclN0eWxlID17XHJcbiAgICBwb3NpdGlvbjoncmVsYXRpdmUnLFxyXG4gICAgbGVmdDonMjAlJyxcclxuICAgIHRleHRBbGlnbjonY2VudGVyJyxcclxuICAgIG1hcmdpblRvcDpcIjIwcHhcIixcclxuICAgIHdpZHRoOlwiNjAlXCIsXHJcbiAgICBwYWRkaW5nOiAnMTBweCAxMHB4JyxcclxuICAgIGJvcmRlcjonMnB4IHNvbGlkICAjZmZkNjMzJyxcclxuICAgIGJhY2tncm91bmRDb2xvcjpcIiNmZmQ2MzNcIixcclxuICAgIGJvcmRlclJhZGl1czonMnB4JyxcclxufTtcclxuXHJcbmNvbnN0IGlucHV0U3R5bGUgPXtcclxuICAgIG1hcmdpbjogMzAsXHJcbiAgICBvdXRsaW5lU3R5bGU6ICdub25lJyAsXHJcbiAgICBib3JkZXI6ICcxcHggc29saWQgI2NjYycsXHJcbiAgICBib3JkZXJSYWRpdXM6ICczcHgnLFxyXG4gICAgcGFkZGluZzogJzEwcHggMTBweCcsXHJcbiAgICB3aWR0aDogJzcwJScsXHJcbiAgICBmb250U2l6ZTogJzI0cHgnLFxyXG4gICAgZm9udEZhbWlseTogXCJNaWNyb3NvZnQgc29mdFwiLFxyXG5cclxufTtcclxudmFyIHNhbHQgPSBiY3J5cHQuZ2VuU2FsdFN5bmMoMTApO1xyXG5jbGFzcyBzaWduaW4gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnR7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge2VtYWlsOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0FsZXJ0OiAnbm9uZScsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOicnXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICBcclxuICAgICAgICB0aGlzLmhhbmRsZUNoYW5nZSA9IHRoaXMuaGFuZGxlQ2hhbmdlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVTdWJtaXQgPSB0aGlzLmhhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlQ2xvc2UgPSB0aGlzLmhhbmRsZUNsb3NlLmJpbmQodGhpcylcclxuICAgICAgfVxyXG4gICAgXHJcbiAgICBoYW5kbGVDaGFuZ2UoZXZlbnQpIHtcclxuICAgICAgICBsZXQgbmFtZSA9IGV2ZW50LnRhcmdldC5uYW1lO1xyXG4gICAgICAgIGxldCB2YWwgPSBldmVudC50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7W25hbWVdOiB2YWx9KTtcclxuICAgICAgIFxyXG4gICAgfVxyXG4gICAgaGFuZGxlQ2xvc2UoKXtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgc2hvd0FsZXJ0Oidub25lJ1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBoYW5kbGVTdWJtaXQoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciBwc3cgPSBiY3J5cHQuaGFzaFN5bmModGhpcy5zdGF0ZS5wYXNzd29yZCwgc2FsdCk7XHJcbiAgICAgICAgY29uc29sZS5sb2cocHN3KVxyXG4gICAgICAgIHZhciBkYXRhID17XHJcbiAgICAgICAgICAgIGVtYWlsOnRoaXMuc3RhdGUuZW1haWwsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOnBzd1xyXG4gICAgICAgIH1cclxuICAgICAgXHJcbiAgICAgICAgUG9zdCgnc2lnbmluJywgZGF0YSkudGhlbihyZXM9PntcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKVxyXG4gICAgICAgICAgICBpZihyZXM9PSctMSd8fCByZXMgPT0gJy0yJyl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtzaG93QWxlcnQ6ICcgYmxvY2snfSlcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2VycjogcmVzfSlcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzYW1lID0gYmNyeXB0LmNvbXBhcmVTeW5jKHRoaXMuc3RhdGUucGFzc3dvcmQscmVzLnBhc3N3b3JkKVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coc2FtZSlcclxuICAgICAgICAgICAgICAgIGlmKHNhbWUpe1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1SWQnLHJlcy51SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyb2xlJyxyZXMucm9sZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRobmFtZTonLycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiByZXNcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2hvd0FsZXJ0OiAnIGJsb2NrJ30pXHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgIFxyXG4gICAgXHJcbiAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgIHJlbmRlcigpe1xyXG4gICAgICAgIHJldHVybihcclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxMYXlvdXQvPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2Rpc3BsYXk6IHRoaXMuc3RhdGUuc2hvd0FsZXJ0fX0+XHJcbiAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuZXJyPT0nLTEnPzxBbGVydCB0aXRsZSA9J3dhcm5pbmchJyBjb250ZW50ID0gJ0ludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQhJyBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsb3NlfS8+OlxyXG4gICAgICAgICAgICAgICAgICAgIDxBbGVydCB0aXRsZSA9J3dhcm5pbmchJyBjb250ZW50ID0gJ1lvdXIgYXBwbGljYXRpb24gaGFzIG5vdCBiZWVuIGFwcHJvdmVkISBQbGVhc2Ugd2FpdC4nIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xvc2V9Lz59XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e2Jhbm5lclN0eWxlfT5cclxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj5TaWduIGluPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17dGhpcy5oYW5kbGVTdWJtaXR9IHN0eWxlPXt7dGV4dEFsaWduOiAnY2VudGVyJ319PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e2JveFN0eWxlfT5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3NOYW1lPXtjc3MuaW5wdXR9IHJlcXVpcmVkPVwicmVxdWlyZWRcIiB0eXBlPVwiZW1haWxcIiBuYW1lPSBcImVtYWlsXCIgcGxhY2Vob2xkZXI9XCJFbnRlciB5b3VyIGVtYWlsXCIgdmFsdWU9e3RoaXMuc3RhdGUudmFsdWV9IG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZX0vPjxici8+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHN0eWxlID0ge2lucHV0U3R5bGV9IHJlcXVpcmVkPVwicmVxdWlyZWRcIiB0eXBlPVwicGFzc3dvcmRcIiBuYW1lID0gXCJwYXNzd29yZFwiIHBsYWNlaG9sZGVyPVwiRW50ZXIgeW91ciBwYXNzd29yZFwiIHZhbHVlPXt0aGlzLnN0YXRlLnZhbHVlfSBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9Lz48YnIvPlxyXG4gICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi1sZ1wiIHN0eWxlPXt7Ym9yZGVyUmFkaXVzOlwiNHB4XCIsbWFyZ2luVG9wOlwiMjBweFwifX0+U2lnbiBpbjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+e2BcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6Zm9jdXN7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6ICM2NmFmZTk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRsaW5lOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC1ib3gtc2hhZG93OiBpbnNldCAwIDFweCAxcHggcmdiYSgwLDAsMCwuMDc1KSwwIDAgOHB4IHJnYmEoMTAyLDE3NSwyMzMsLjYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwwLDAsLjA3NSksMCAwIDhweCByZ2JhKDEwMiwxNzUsMjMzLC42KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYH08L3N0eWxlPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9mb3JtPiBcclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3t0ZXh0QWxpZ246J2NlbnRlcid9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3tjb2xvcjoncmVkJ319PmhhdmUgbm8gYWNjb3VudD8mbmJzcDsmbmJzcDs8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9Jy9zaWdudXAnPnNpZ24gdXA8L2E+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8L2Rpdj4gXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgc2lnbmluOyJdfQ== */\\n/*@ sourceURL=D:\\\\workplace\\\\front-end\\\\pages\\\\signin.js */\"))), __jsx(\"div\", {\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, __jsx(\"span\", {\n      style: {\n        color: 'red'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"have no account?\\xA0\\xA0\"), __jsx(\"a\", {\n      href: \"/signup\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"sign up\")));\n  }\n\n}\n\nexport default signin;","map":{"version":3,"sources":["D:\\workplace\\front-end\\pages\\signin.js"],"names":["Layout","bcrypt","Router","Alert","Post","css","boxStyle","position","left","textAlign","width","marginBottom","padding","border","borderRadius","bannerStyle","marginTop","backgroundColor","inputStyle","margin","outlineStyle","fontSize","fontFamily","salt","genSaltSync","signin","React","Component","constructor","props","state","email","password","showAlert","err","data","handleChange","bind","handleSubmit","handleClose","event","name","target","val","value","setState","preventDefault","psw","hashSync","console","log","then","res","same","compareSync","localStorage","setItem","uId","role","push","pathname","query","render","display","input","color"],"mappings":"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","sourcesContent":["import Layout from \"./components/myLayoutBefore\";\r\nimport bcrypt from \"bcryptjs\";\r\nimport Router from 'next/router';\r\nimport {Alert} from './components/warnAlert';\r\nimport { Post } from \"./components/http\";\r\nimport css from './css/style.css'\r\n\r\nconst boxStyle={\r\n    position:'relative',\r\n    left:'20%',\r\n    textAlign:'center',\r\n    width:\"60%\",\r\n    marginBottom:'20px',\r\n    padding:'30px',\r\n    border:'2px solid  #ffd633',\r\n    borderRadius:'2px',\r\n    \r\n};   \r\nconst bannerStyle ={\r\n    position:'relative',\r\n    left:'20%',\r\n    textAlign:'center',\r\n    marginTop:\"20px\",\r\n    width:\"60%\",\r\n    padding: '10px 10px',\r\n    border:'2px solid  #ffd633',\r\n    backgroundColor:\"#ffd633\",\r\n    borderRadius:'2px',\r\n};\r\n\r\nconst inputStyle ={\r\n    margin: 30,\r\n    outlineStyle: 'none' ,\r\n    border: '1px solid #ccc',\r\n    borderRadius: '3px',\r\n    padding: '10px 10px',\r\n    width: '70%',\r\n    fontSize: '24px',\r\n    fontFamily: \"Microsoft soft\",\r\n\r\n};\r\nvar salt = bcrypt.genSaltSync(10);\r\nclass signin extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {email: '',\r\n                    password: '',\r\n                    showAlert: 'none',\r\n                    err: '',\r\n                    data:''\r\n                };\r\n      \r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleClose = this.handleClose.bind(this)\r\n      }\r\n    \r\n    handleChange(event) {\r\n        let name = event.target.name;\r\n        let val = event.target.value;\r\n        this.setState({[name]: val});\r\n       \r\n    }\r\n    handleClose(){\r\n        this.setState({\r\n            showAlert:'none'\r\n        })\r\n    }\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        var psw = bcrypt.hashSync(this.state.password, salt);\r\n        console.log(psw)\r\n        var data ={\r\n            email:this.state.email,\r\n            password:psw\r\n        }\r\n      \r\n        Post('signin', data).then(res=>{\r\n            console.log(res)\r\n            if(res=='-1'|| res == '-2'){\r\n                this.setState({showAlert: ' block'})\r\n                this.setState({err: res})\r\n            }else{\r\n                const same = bcrypt.compareSync(this.state.password,res.password)\r\n                console.log(same)\r\n                if(same){\r\n                    localStorage.setItem('uId',res.uId);\r\n                    localStorage.setItem('role',res.role);\r\n                    Router.push({\r\n                        pathname:'/',\r\n                        query: res\r\n                    })\r\n                }else{\r\n                    this.setState({showAlert: ' block'})\r\n                } \r\n            }\r\n        })\r\n       \r\n    \r\n    }\r\n        \r\n      render(){\r\n        return(\r\n            <div>\r\n                <Layout/>\r\n                <div style={{display: this.state.showAlert}}>\r\n                    {this.state.err=='-1'?<Alert title ='warning!' content = 'Invalid email or password!' onClick={this.handleClose}/>:\r\n                    <Alert title ='warning!' content = 'Your application has not been approved! Please wait.' onClick={this.handleClose}/>}\r\n                </div>\r\n                <div style={bannerStyle}>\r\n                    <span>Sign in</span>\r\n                </div>\r\n                <form onSubmit={this.handleSubmit} style={{textAlign: 'center'}}>\r\n                    <div style={boxStyle}>\r\n                    <input className={css.input} required=\"required\" type=\"email\" name= \"email\" placeholder=\"Enter your email\" value={this.state.value} onChange={this.handleChange}/><br/>\r\n                    <input style = {inputStyle} required=\"required\" type=\"password\" name = \"password\" placeholder=\"Enter your password\" value={this.state.value} onChange={this.handleChange}/><br/>\r\n                   \r\n                    <button type=\"submit\" className=\"btn btn-primary btn-lg\" style={{borderRadius:\"4px\",marginTop:\"20px\"}}>Sign in</button>\r\n                    <style jsx>{`\r\n                        input:focus{\r\n                            border-color: #66afe9;\r\n                            outline: 0;\r\n                            -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6);\r\n                            box-shadow: inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)\r\n                        }\r\n                    `}</style>\r\n                    </div>\r\n                </form> \r\n                <div style={{textAlign:'center'}}>\r\n                        <span style={{color:'red'}}>have no account?&nbsp;&nbsp;</span>\r\n                        <a href='/signup'>sign up</a>\r\n                </div>\r\n                \r\n            </div> \r\n        );\r\n    }\r\n\r\n}\r\nexport default signin;"]},"metadata":{},"sourceType":"module"}